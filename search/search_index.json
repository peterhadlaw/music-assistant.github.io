{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Music Assistant","text":"<p>Music Assistant is a music library manager for your offline and online music sources which can easily stream your favourite music to a wide range of supported players and be combined with the power of Home Assistant!</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Supports multiple music sources through a provider implementation</li> <li>Many popular streaming services are supported, as well as local files</li> <li>Automatically matches music on different providers (track linking)</li> <li>Fetches metadata for extended artist information</li> <li>Keeps track of the entire music library in a compact database</li> <li>Gapless, crossfade and volume normalization support for all players</li> <li>Playback synchronisation is possible for supported players</li> <li>Announcements during playback supported </li> <li>Truly hassle free streaming of your favourite music to players, no advanced knowledge required</li> <li>Rich User interface (Progressive Web App) powered by VueJS 3</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<p>Music Assistant consists of multiple building blocks:</p> <ul> <li>Music Assistant Server (Installation Instructions)</li> <li>Music Assistant Integration for Home Assistant (Installation Instructions)<ul> <li>An optional sub-component of the Integraton is the Home Assistant Plugin for Music Assistant. This allows the importing of Home Assistant media players into the Music Assistant engine to use as targets for playback</li> </ul> </li> </ul>"},{"location":"#music-assistant-server","title":"Music Assistant Server","text":"<p>The Music Assistant server is a free, opensource Media library manager that connects to your streaming services and a wide range of connected speakers. The server is the beating heart, the core of Music Assistant and it keeps track of your music sources. It must run on an always-on device like a Raspberry Pi, a NAS or an Intel NUC or alike. The server can access multiple music providers and stream to multiple player types.</p>"},{"location":"#music-assistant-integration","title":"Music Assistant Integration","text":"<p>Connects Home Assistant to your Music Assistant Server to allow control from your HA instance, allow you to automate your music and allows voice control! The Integration also allows the exposure of HA media players to MA furthering the options you have for playback.</p>"},{"location":"#preview","title":"Preview","text":"Click to show more screenshots"},{"location":"#the-team","title":"The Team","text":""},{"location":"companion-app/","title":"Music Assistant Companion","text":"<p>The desktop companion app for Music Assistant!</p> <p>Download for macOS (Apple Silicon | Intel) \u00b7 Windows \u00b7 Linux (Debian | Other)</p> <p>This is still in very early alpha. Bugs will be present.</p> <p>Please help finding them. You can report any bugs on the Discord server or in the repo issues</p> <p>Note</p> <p>There aren't apps available yet for Android or iOS</p>"},{"location":"companion-app/#setup","title":"Setup","text":"<p>When starting the app for the first time you are asked for some information about the Music Assistant Server.</p> <p></p> <p>The app requires that the webserver is exposed. You can set that in the settings</p> <p></p>"},{"location":"companion-app/#features","title":"Features","text":""},{"location":"companion-app/#squeezelite","title":"Squeezelite","text":"<p>Squeezelite comes embedded in the application. This allows playback of music to your computer. The player name will be the same as your computer name. You can change the name in Music Assistant settings. You can also toggle if you wish to enable squeezelite at all.</p>"},{"location":"companion-app/#discord-rich-presence","title":"Discord Rich Presence","text":"<p>Like the Spotify app, the Music Assistant app can do Discord Rich Presence.</p> <p>Example of Discord Rich Presence:</p> <p></p>"},{"location":"companion-app/#installation","title":"Installation","text":""},{"location":"companion-app/#arch-linux","title":"Arch Linux","text":"<p>This app is on the arch aur with the name <code>music-assistant-desktop</code> or <code>music-assistant-desktop-bin</code> for just the binary</p> <p>You can install it with yay: <code>yay music-assistant-desktop-bin</code></p>"},{"location":"companion-app/#debian-and-debian-based-distributions","title":"Debian (And debian based distributions)","text":"<p>You can download the .deb from the releases.</p>"},{"location":"companion-app/#all-the-other-linux-distros","title":"All the other linux distros","text":"<p>You can download the AppImage from the releases.</p>"},{"location":"companion-app/#macos","title":"MacOS","text":"<p>You can download the .dmg from the releases.</p> <p>The app is unsigned since we currently don't want to spend 90 USD/yr for an Apple Developer account.</p> <p>Therefore it will warn you about an untrusted developer/app downloaded from the internet. To open it follow these instructions</p>"},{"location":"companion-app/#windows","title":"Windows","text":"<p>You can download the .msi installer from the releases.</p>"},{"location":"companion-app/#from-source","title":"From source","text":"<p>If you wish to build the app yourself you should first follow the offical tauri prerequisites</p> <p>Next, make sure you have the frontend submodule cloned. You can do this by running the following command:</p> <pre><code>git submodule --init --recursive\n</code></pre> <p>Then clone the repository and install the node dependencies</p> <pre><code>$ git clone https://github.com/music-assistant/music-assistant-desktop --recursive\n$ cd music-assistant-desktop\n$ yarn install\n$ cd frontend\n$ yarn install\n$ cd ..\n</code></pre> <p>And then build the app</p> <pre><code>$ npx tauri build\n</code></pre>"},{"location":"installation/","title":"Installing the Server","text":"<p>Installing via Home Assistant is the easiest way to get started!</p> <p>Music Assistant (MA) can be operated as a complete standalone product but it is actually tailored to use side by side with Home Assistant. MA is built with automation in mind, hence our recommended installation method is to run the server as a Home assistant Add-on which will be automatically installed when you add the Home Assistant Integration. Install using one of the three methods below.</p> <p>MA requires a 64bit Operating System and a minimum of 2GB of RAM on the physical device or the container (physical devices are recommended to have 4GB+ if they are running anything else)</p>"},{"location":"installation/#primary-installation-method-home-assistant-integration-installation","title":"Primary installation method: Home Assistant Integration Installation","text":"<p>Using HAOS. Go to the Home Assistant Integration page and follow the instructions there which will install the integration and the server (as an addon).</p>"},{"location":"installation/#secondary-installation-method-home-assistant-add-on-manual-installation","title":"Secondary installation method: Home Assistant Add-on Manual Installation","text":"<p>Using HAOS. If you dont need the HA Integration but want to run the Music Assistant Server then install the Music Assistant Add-on manually:</p> <ol> <li>Add the Music Assistant repository to your Home Assistant instance.</li> <li>Install the Music Assistant add-on.</li> </ol> <p></p>"},{"location":"installation/#tertiary-installation-method-docker-image","title":"Tertiary installation method: Docker image","text":"<p>An alternative way to run the Music Assistant server is by running the docker image:</p> <pre><code>docker run --network host --privileged -v &lt;dir&gt;:/data ghcr.io/music-assistant/server\n</code></pre> <p>You must run the docker container with host network mode and in privileged mode. The data volume is <code>/data</code> - replace <code>&lt;dir&gt;</code> with a writable directory to ensure the data volume persists between updates. If you want access to your local music files from within MA, make sure to also mount that, e.g. /media. Note that accessing remote (SMB) shares can be done from within MA itself using the SMB File provider (but requires the privileged flag).</p>"},{"location":"installation/#server-notes","title":"Server Notes","text":"<ul> <li> <p>Because the server heavily relies on multicast techniques like mDNS and uPnP to discover players in your network it MUST be run in the same Layer 2 network as your player devices.</p> </li> <li> <p>The server itself hosts a very simple webserver to stream audio to devices. This webinterface must be accessible via HTTP (no HTTPS) by IP-address from local players. See the server's logging at startup to see if the server has correctly auto-detected the local IP.</p> </li> <li> <p>The server itself hosts a websocket API and a JSON RPC API which is more or less compatible with LMS, however, you cannot run a separate LMS server on your network if the MA slimproto provider is enabled. The Music Assistant fronted communicates with the server using the websockets API.</p> </li> <li> <p>You cannot run the slimproto integration in Home Assistant if the slimproto provider is emabled.</p> </li> <li> <p>The webinterface of the server can be reached on TCP port 8095 if enabled in the settings. By default, on HAOS based installations, the webserver is internal only and not exposed to the outside world. It is protected by HA authentication using the Ingress feature of Home Assistant (you also get the sidepanel shortcut for free!)</p> </li> <li> <p>You can access the frontend over https by following these steps:</p> </li> <li> <p>Expose the webserver via MA settings&gt;&gt;Core&gt;&gt;webserver</p> </li> <li> <p>To access the frontend behind a reverse proxy you will have to configure the reverse proxy to point at the 8095 port and expose it to whatever is desired (and add an ssl certificate). How that works differs for each implemention. </p> </li> </ul> <p>Tip</p> <p>You can keep the server more secure by NOT exposing the webserver and let the addon talk directly to the webserver on the internal docker network. In that case address the internal dns name of the addon would be, for example, http://d5369777-music-assistant-beta:8095</p>"},{"location":"installation/#usage-and-notes","title":"Usage and Notes","text":"<ul> <li>If you are running Music Assistant in docker, you need to access the webinterface at http://youripaddress:8095. When running the Home Assistant add-on, you can access the webinterface from the add-on (a shortcut can be added to the sidebar) which is more secure than via the port (although the port can be exposed in the settings).</li> <li>Music from your music sources will be automatically loaded into the Music Assistant library. If you have multiple sources, they will be merged as one library.</li> <li>In this first implementation the UI centres around the concept of the Library, so your artists, albums, tracks, playlists and radio stations. You can BROWSE the various providers to add aditional items to your Library. In a later release options will be provided to browse the recommendations of the various streaming providers.</li> <li>Note that at the first startup it can take a while before data is available (first sync), the Music Assistant UI will notify you about tasks that are in progress.</li> <li>Music sources are synced at addon (re)start and every 3 hours (or other interval as selected in the settings).</li> <li>If a song is available on multiple providers (e.g. Spotify and a flac file on disk), the file/stream with the highest quality is always preferred when starting a stream.</li> <li>Music Assistant uses a custom stream port (TCP 8096 by default) to stream audio to players. Players must be able to reach the Home Assistant instance and this port. If you're running one of the recommended HAOS installation methods, this is all handled for you, otherwise you will have to make sure you're running MA in a container in privileged mode and HOST network mode. Note: If the default port 8096 is occupied, the next port will be tried, and so on.</li> </ul>"},{"location":"release/","title":"Release Cycle","text":""},{"location":"release/#stable-releases","title":"Stable Releases","text":"<p>Stable releases will only be published every 1-3 months, depending upon the number of feature improvements. These stable releases will come after a beta cycle has been promoted to \"Release Candidate\" and the development team all agree its stable enough to be promoted.</p> <p>Patch releases may be pushed if there if there is a compelling need (e.g. an urgent bugfix)</p>"},{"location":"release/#beta-releases","title":"Beta Releases","text":"<p>Beta releases are planned to be released every 1 - 4 weeks, depending on the number of changes.</p> <p>Once 2.0 is released, the beta for version 2.1 will be available. It is possible to remain on the beta channel.</p> <p>There is also a dev/nightly add-on which can be run to get the absolute latest version but this comes with risk of intermittent problems during the development cycle.</p> <p>It is possible to run the stable, beta or dev server add-ons side by side if desired as they don't share any data. Thus you can temporarily run the beta add-on to try out new features and then revert to the stable version.</p>"},{"location":"release/#ha-integration","title":"HA Integration","text":"<p>For the HA integration there will also be stable and beta releases if there is a need. For example, if there are any breaking changes (or new features) in the beta add-on, that will be a reason to also have a beta release of the HA integration. People running the MA server on the beta channel are advised to also run the HA integration in beta to prevent compatibility issues and vice versa.</p>"},{"location":"support/","title":"Support","text":"<p>Because this project originated out of a Home Assistant integration, all enduser support is maintained in a separate repository. Raise issues and discuss ideas here</p> <p>Direct links are:</p> <ul> <li>Issue Tracker to create bug reports. Please review the troubleshooting page first and check if your issue has already been reported. When raising a report please include detailed info and logfiles.</li> <li>Feature Requests: Give your vote to an existing request, join the discussion or add a new request.</li> <li>Q&amp;A Section Frequently asked questions and tutorials</li> </ul> <p>Additionally you can seek assistance in the discord community. Join the community and get support!</p> <p>Before You Ask:</p> <p>Review how to Ask Questions The Smart Way</p> <p>Before asking a technical question in any of our support channels, please do the following:</p> <ol> <li>Try to find an answer by searching this documentation and discussions</li> <li>Try to find an answer by searching the Closed Issues</li> <li>Try to find an answer by searching the Web: https://www.google.com/</li> <li>Try to find an answer by inspection or experimentation.</li> <li>Try to find an answer by asking a skilled friend.</li> </ol> <p>When you ask your question, display the fact that you have done these things first; this will help establish that you're not being lazy and wasting people's time. Better yet, display what you have learned from doing these things. We like answering questions for people who have demonstrated they can learn from the answers.</p>"},{"location":"ui/","title":"User Interface","text":""},{"location":"ui/#main-menu","title":"Main Menu","text":"<p>When visiting Browse you will only see what is already in the Library of the Streaming Providers. For the local Providers you will see all files and if a folder is visited that is not already in the MA Library it will be automatically added even if it has been previously removed.</p>"},{"location":"ui/#player-bar","title":"Player Bar","text":"<p>The codec shown in the UI to the right of the track title is the codec of the original source. MA re-encodes the track to FLAC when it is sent to the player (Unless the force lossy MP3 option is selected in the player settings (only available for some player types)). </p>"},{"location":"ui/#now-playing-view","title":"Now Playing View","text":""},{"location":"ui/#player-list","title":"Player List","text":"<p>Note</p> <p>The volume shown against a player group is the AVERAGE of the volumes of each individal player. When the group volume is changed then each player is changed by a proportionate amount.</p> <p>When a player group is powered on the members of that group will disappear from the player list and individual playback to those players will not be possible. In order to playback to an individual player then either power off the group or remove the player from the group.</p> <p>Note</p> <p>The MDI icon shown against each player can be changed in the player settings.</p>"},{"location":"ui/#grouping-players","title":"Grouping Players","text":"<p>If mutiple players in a group are being streamed to then this is shown by a number on the player name in the control bar. In the example image below there are two ACTIVE players in the group.</p> <p></p> <p>There are three ways to group players</p> <ol> <li>As shown in the previous section players can be linked via the icon in the player list. Only like player types that support synced playback are allowed to be joined. These players will then play in sync. It should be noted that when players are grouped in this way only the main player holds the queue. For example, player A has an existing queue and players B and C are joined to player A. If player A is turned off, players B and C will also stop.</li> <li> <p>Create a group player via the settings. The native player types shown (i.e. not the Universal Group option) support perfect sync (this is a requirement to be shown here). In addition to playing in sync the group will also keep playing regardless of which player(s) in the group are powered off. So the group player holds the queue rather that any individual player. </p> <p></p> </li> <li> <p>Create a Universal Group</p> </li> </ol>"},{"location":"ui/#artist-album-track-view","title":"Artist / Album / Track View","text":"<p>Album and Track Views look the same as the above except there is no album artist filter icon but there is an additional view specific menu item</p> <p>A red dot on the search icon  indicates that the viewed results are subject to filtering by search. This is useful if the search box has been closed.</p> <p>A red dot on the refresh icon  indicates that the viewed results have some sort of update pending. Press the refresh button.</p> <p>Items in all views can be \"right clicked\" or \"long pressed\" to bring up an extensive menu of options. See an example below in the Track Menu section</p> <p>Multiple selections of albums / artists / tracks is possible by clicking the multi-select icon. Once one or more items are selected then clicking on the \"ACTIONS\" at the bottom</p> <p></p> <p>will bring up this menu</p> <p></p> <p>The behaviour described above will work on any view where you see the \"x item(s) selected\" text.</p>"},{"location":"ui/#individual-artist-view","title":"Individual Artist View","text":"<p>The tracks and albums sections are collapsible. The view above shows them both collapsed. The tracks section shows ALL tracks that are in the library or that are available across all of the providers. A red dot on the library icon  indicates that the viewed results are filtered to only show items that are in the library. To see what albums any given track is on you can either sort alphabetically or click on one and use the context menu and SHOW INFO. </p> <p>The PROVIDER DETAILS section shows from where the albums and tracks listed above were obtained. It is normal to have multiple entries here if an artist has aliases or there are variant spellings, use of punctuation etc.  The ID shown against the streaming provider may be used in automations and scripts.</p>"},{"location":"ui/#track-menu","title":"Track Menu","text":"<p>Right click or long press on a track to get the following</p> <p></p> <p>If the provider supports it you will also see the START RADIO option. This will populate the queue with tracks based on the selected track. The tracks are selected by the provider not MA. </p> <p></p>"},{"location":"ui/#track-show-info-view","title":"Track \"Show Info\" View","text":"<p>Note</p> <p>The PROVIDER DETAILS section in this view also has the functionality to play a short part of the track as a preview</p>"},{"location":"usage/","title":"General","text":""},{"location":"usage/#the-library","title":"The Library","text":"<p>The Music Assistant Library is a database containing details of the music which the user has indicated they are interested in listening to on a regular basis. It consists of information about Artists, Albums, Tracks, Playlists and Radio Stations which allows easy searching, display and cross referencing across the User Interface.</p> <p>For local music providers all artists/albums/tracks/playlists are imported into the MA library when the provider is added and at each sync.</p> <p>For streaming providers ONLY the SPECIFIC artists/albums/tracks/playlists that are in the streaming providers library (or favourites or however it is termed in the provider) will be imported into the MA library when the provider is added and at each sync. This means, for example, if you have an artist in the providers library but none of their albums then all you will see in the MA library is the artist with NO associated albums or tracks. You have to subsequently add albums or tracks to the MA library if you want to see them in the library views. Note you can toggle the library / streaming provider filter option to see all that is available in the streaming provider.</p> <p>Note</p> <p>If identical items (e.g. an album or track) have not been matched across providers or within a provider then select the item and using the \u22ee menu in the top banner select REFRESH ITEM</p> <p></p> <p>Favourites</p> <p>As a further means of filtering the library, items can be marked as a \"favourite\". This is shown in the UI as a filled heart icon. Items are not favourited by default. You can see all items if you deselect the heart icon in the top menu.</p>"},{"location":"usage/#the-queue","title":"The Queue","text":"<p>Each player has its own queue. Viewing the queue is done by pressing the  button. This button can be found on the control bar at the bottom of the UI or for narrow displays in the NOW PLAYING view.</p> <p>Depending upon screen resolution the PLAYED ITEMS option may or may not be visible. If it is then selecting that will show the previous items from the queue and selecting any will restart the queue from that point.</p> <p></p> <p>Note</p> <p>What happens to the queue when the different types of items (e.g. album, artist, playlist etc) are added to it is configurable in MA SETTINGS&gt;&gt;CORE&gt;&gt;PLAYER QUEUES CONTROLLER</p> <p>Right clicking or long press on a track in the queue will show this menu</p> <p></p> <p>The options in the menu in the top right is shown below. This is the only place crossfade can be enabled or disabled (crossfade duration is set in the player settings). Repeat and Shuffle have buttons at the bottom in the control bar (or in the NOW PLAYING view for narrow mobile devices).</p> <p></p> <p>Note</p> <p>If a queue is paused for more than 30 seconds it's status will change to stopped </p>"},{"location":"usage/#playlists","title":"Playlists","text":"<p>Playlists must be stored on a provider. A music provider's playlist can only contain tracks from that provider. However, MA has a built-in provider with the ability to create playlists that have tracks from multiple music providers. In this case the playlist will be stored solely within the MA database. These options are automtically presented in the Add to Playlist dialog.</p> <p>Playlists which consist of tracks from the filesystem provider will be stored in the MA database.</p> <p>User created playlists from streaming providers will be imported into the MA database and will remain synchronised regardless of whether changes are made from the MA UI or from the streaming providers native applicatons.</p> <p>Automatically generated playlists from streaming providers may be supported. See the specific provider documentation for further information.</p> <p>MA automatically generates some dynamic playlists. These playlists will be updated when they are viewed or played.</p>"},{"location":"developer-docs/dev-docs/","title":"Developer docs","text":""},{"location":"developer-docs/dev-docs/#prerequisites","title":"\ud83d\udcdd Prerequisites","text":"<ul> <li>ffmpeg (minimum version 4, version 5 recommended), must be available in the path so install at OS level</li> <li>Python 3.11 is minimal required (or check the pyproject for current required version)</li> <li>Python venv</li> </ul> <p>It is recommended to use Visual Studio Code as your IDE, since launch files to start Music Assistant are provided as part of the repository. Furthermore, the current code base is not verified to work on a native Windows machine. If you would like to develop on a Windows machine, install WSL2 to increase your swag-level \ud83e\udd18.</p>"},{"location":"developer-docs/dev-docs/#setting-up-your-development-environment","title":"\ud83d\ude80 Setting up your development environment","text":"<p>With this repository cloned locally, execute the following commands in a terminal from the root of your repository: * <code>python -m venv .venv</code> (create a new separate virtual environment to nicely separate the project dependencies) * <code>source .venv/bin/activate</code> (activate the virtual environment) * <code>pip install -r requirements_all.txt</code> (install the project's dependencies) * Hit (Fn +) F5 to start Music Assistant locally * The pre-compiled UI of Music Assistant will be available at <code>localhost:8095</code> \ud83c\udf89</p> <p>All code is linted and verified using pre-commit. To make sure that all these checks are executed successfully before you push your code: * <code>pip install pre-commit</code> * <code>pre-commit install</code> This ensures that the pre-commit checks kick in when you create a commit locally.</p> <p>The Music Assistant server is fully built in Python. The Python language has no real supported for multi-threading. This is why Music Assistant heavily relies on asyncio to handle blocking IO. It is important to get a good understanding of asynchronous programming before building your first provider. This video is an excellent first step in the world of asyncio.</p>"},{"location":"developer-docs/dev-docs/#building-your-own-music-provider","title":"\ud83c\udfb5 Building your own Music Provider","text":"<p>A Music Provider is one of the provider types that adds support for a 'source of music' to Music Assistant. Spotify and Youtube Music are examples of a Music Provider, but also Filesystem and SMB can be put in the Music Provider category. All Music Providers can be found in the <code>music_assistant/server/providers</code> folder.</p> <p>Adding the necessary files for a new Music Provider</p> <p>Add a new folder to the <code>providers</code> folder with the name of provider. Add two files inside: 1. <code>__init__.py</code>. This file contains the Python code of your provider. 2. <code>manifest.json</code>. This file contains metadata and configuration for your provider.</p> <p>Configuring the manifest.json file</p> <p>The easiest way to get start is to copy the contents of the manifest of an existing Music Provider, e.g. Spotify or Youtube Music. See the manifest section for all available properties.</p> <p>Creating the provider</p> <p>Create a file called <code>__init__.py</code> inside the folder of your provider. This file will contain the logic for the provider. All Music Providers must inherit from the <code>MusicProvider</code> base class and override the necessary functions where applicable. A few things to note: * The <code>setup()</code> function is called by Music Assistant upon initialization of the provider. It gives you the opportunity the prepare the provider for usage. For example, logging in a user or obtaining a token can be done in this function. * A provider should let Music Assistant know which <code>ProviderFeatures</code> it supports by implementing the property <code>supported_features</code>, which returns a list of <code>ProviderFeatures</code>. * The actual playback of audio in Music Assistant happens in two phases:     1. <code>get_stream_details()</code> is called to obtain information about the audio, like the quality, format, # of channels etc.     2. <code>get_audio_stream()</code> is called to stream raw bytes of audio to the player. There are a few helpers to help you with this. Note that this function is not applicable to direct url streams. * Examples:     1. Streaming raw bytes using an external executable (librespot) to get audio, see the Spotify provider as an example     2. Streaming a direct URL, see the Youtube Music provider as an example     3. Streaming an https stream that uses an expiring URL, see the Qobuz provider as an example</p>"},{"location":"developer-docs/dev-docs/#building-your-own-player-provider","title":"\u25b6\ufe0f Building your own Player Provider","text":"<p>Will follow soon\u2122</p>"},{"location":"developer-docs/dev-docs/#building-your-own-metadata-provider","title":"\ud83d\udcbd Building your own Metadata Provider","text":"<p>Will follow soon\u2122</p>"},{"location":"developer-docs/dev-docs/#building-your-own-plugin-provider","title":"\ud83d\udd0c Building your own Plugin Provider","text":"<p>Will follow soon\u2122</p>"},{"location":"developer-docs/dev-docs/#manifest-file","title":"\u2699\ufe0f Manifest file","text":"<p>The manifest file contains metadata and configuration about a provider. The supported properties are: | Name  | Description  | Type  | |---|---|---| | type  | <code>music</code>, <code>player</code>, <code>metadata</code> or <code>plugin</code>  | string  | | domain  | The internal unique id of the provider, e.g. <code>spotify</code> or <code>ytmusic</code>  | string  | | name  | The full name of the provider, e.g. <code>Spotify</code> or <code>Youtube Music</code>  | string  | | description  | The full description of the provider  | string  | | codeowners  | List of Github names of the codeowners of the provider  | array[string]  | | config_entries  | List of configurable properties for the provider, e.g. <code>username</code> or <code>password</code>*. | array[object]  | | config_entries.key  | The unique key of the config entry, used to obtain the value in the provider code  | string  | | config_entries.type  | The type of the config entry. Possible values: <code>string</code>, <code>secure_string</code> (for passwords), <code>boolean</code>, <code>float</code>, <code>integer</code>, <code>label</code> (for a single line of text in the settings page)  | string  | | config_entries.label | The label of the config entry. Used in the settings page | string | | requirements | List of requirements for the provider in pip string format. Supported values are <code>package==version</code> and <code>git+https://gitrepoforpackage</code> | array[string] | documentation | URL to the Github discussion containing the documentation for the provider. | string | | multi_instances | Whether multiple instances of the configuration are supported, e.g. multiple user accounts for Spotify | boolean |</p> <p>* These <code>config_entries</code> are used to automatically generate the settings page for the provider in the front-end. The values can be obtained via <code>self.config.get_value(key)</code>.</p>"},{"location":"faq/how-to/","title":"Use Assist and AI to Play my Music?","text":"<p>See here. This adds a PLAY command. The core HA voice intents support NEXT TRACK, PAUSE, UNPAUSE and VOLUME to a specific player. Until all of the media player service calls are supported by HA (including to areas) you can use custom sentences. See this discussion for how.</p>"},{"location":"faq/how-to/#use-volume-normalization-how-does-it-work","title":"Use volume normalization? How does it work?","text":"<p>The setting in MA is the target level for the volume normalization. MA does not compress the dynamic range (because that is bad for quality) but just adjusts the gain of the entire track based on its overall loudness as measured by the EBU R128 standard. A greater negative value will typically make the track sound less loud but leaves a lot of headroom. However, for each individual track the gain could rise or fall to ensure that the overall loudness of all tracks played is at the selected level. We recommend to use a value between -23 and -17 LUFS (and -17 is the recommended starting point). Do not set it too high (close to zero) because that can make your music sound distorted due to clipping.</p> <p>More details here</p>"},{"location":"faq/how-to/#have-my-music-continue-if-i-change-rooms","title":"Have my music continue if I change rooms","text":"<p>Start streaming to a group that includes all the rooms you will move between. Power off or mute all the rooms except the one you are in. When you move rooms just power (or mute) on and off the respective rooms. Depending on the complexity of your setup you may need to use nested groups of speakers.</p> <p>You can read, ask or contribute on this topic</p>"},{"location":"faq/how-to/#shuffle-spotifyplaylistyoutube-etc","title":"Shuffle Spotify/playlist/Youtube etc","text":"<p>You don't shuffle the music providers you enable shuffle on the queue for the player and then whatever gets added to the queue gets shuffled. You enable shuffle on the queue from within MA by selecting the Shuffle Icon in the Player frontend or you can select the QUEUE at the bottom, then the context menu Top Right then SETTINGS then SHUFFLE ON or you can do it with yaml as follows: <pre><code>service: media_player.shuffle_set\ntarget:\n  entity_id: media_player.mass_bath\ndata:\n  shuffle: true\n</code></pre></p>"},{"location":"faq/how-to/#add-items-to-the-queue-via-a-script-or-automation","title":"Add items to the queue via a script or automation","text":"<pre><code>service: media_player.play_media\ntarget:\n  entity_id: media_player.mass_player_entity_goes_here\ndata:\n  media_content_id: NameOfTheAlbumArtistOrPlaylistHere\n  media_content_type: music\n</code></pre> <p>See here for enqueue options</p> <p>See also mass.play_media service call</p>"},{"location":"faq/how-to/#start-a-playlist-with-a-script","title":"Start a playlist with a script","text":"<p>Use the <code>media_player.play_media</code> service call shown above or <code>mass.play_media</code> service as described here.</p>"},{"location":"faq/how-to/#start-a-radio-stream-with-an-automation","title":"Start a radio stream with an automation","text":"<p>Use the <code>mass.play_media</code> service call and set the <code>media_id</code> as the station name.</p>"},{"location":"faq/how-to/#clear-the-queue-with-a-script-or-automation","title":"Clear the queue with a script or automation","text":"<p>Use the HA service call of <code>media_player.clear_playlist</code> or the new <code>mass.play_media</code> service call and select the appropriate enqueue option if wanting to clear the queue and play something else.</p>"},{"location":"faq/how-to/#add-radio-stations-to-ma","title":"Add radio stations to MA","text":"<p>If you use the TuneIn provider then stations that are favourited in your account will appear.</p> <p>If you use the RadioBrowser provider then BROWSE the provider and select ADD TO LIBRARY for the station desired.</p> <p>Direct entry of stations can be done by navigating to the radio stations page and selecting the menu top right and ADD ITEM FROM URL This will also work for locally hosted streams such as from Icecast. </p>"},{"location":"faq/how-to/#create-playlists-or-use-m3u-files","title":"Create playlists or use M3U files","text":"<p>You can create playlists from the MA UI. Adding items can also be done from the UI.</p> <p>If wanting to create playlists manually acceptable formats are: <pre><code>(file in same folder as playlist):\n05 Blue Christmas.flac\n\nand this (file is in subfolder relative to playlist file):\nElvis Presley/Blue Christmas/05 Blue Christmas.flac\n\nand this (file has absolute path):\n/Users/marcel/media/music/b05 Blue Christmas.flac\n\nand this (full uri):\nspotify://track/12345\nor\nfilesystem_smb://track/blah\n</code></pre></p> <p>Relative paths to the playlist (e.g.<code>../Mariah Carey/Merry Christmas/02 All I Want for Christmas Is You.flac</code> ) should also work.</p>"},{"location":"faq/how-to/#go-to-nextprevious-radio-station-via-a-script","title":"Go to next/previous radio station via a script","text":"<p>Create a playlist with multiple radio stations and start playing it. Now you can use next and previous to switch between the stations</p>"},{"location":"faq/how-to/#stop-the-music-after-a-period-of-time-aka-sleep-timer","title":"Stop the music after a period of time aka Sleep Timer","text":"<pre><code>sequence:\n  - wait_for_trigger:\n      - platform: state\n        entity_id:\n          - media_player.mass_all_rooms\n        attribute: media_title\n    continue_on_timeout: false\n  - service: media_player.turn_off\n    data: {}\n    target:\n      entity_id:\n        - media_player.mass_all_rooms\nmode: single\nalias: Stop after current track\n</code></pre> <p>Thanks to AAsikki who showed us here</p>"},{"location":"faq/how-to/#use-ma-with-mopidy","title":"Use MA with Mopidy","text":"<p>See here https://github.com/music-assistant/hass-music-assistant/discussions/439</p>"},{"location":"faq/how-to/#use-the-ma-service-call-massplay_media","title":"Use the MA service call <code>mass.play_media</code>","text":"<p>See here</p>"},{"location":"faq/how-to/#use-the-ma-service-call-masssearch","title":"Use the MA service call <code>mass.search</code>","text":"<p>See here</p>"},{"location":"faq/how-to/#get-the-uri","title":"Get the URI?","text":"<p>For playlists, artists, albums and radio you can simply use the name.</p> <p>For tracks you can use the name but that may result in ambiguous responses so you can limit by artist name by using <code>Billy Joel - A Matter of Trust</code> if that is still ambiguous then the service call has additional options which you can use to further restrict the search , for example:</p> <pre><code>data:\n  media_type: track\n  media_id: Running on Ice\n  artist: Billy Joel\n  album: The Bridge\n</code></pre> <p>Similarly, if the album name is ambiguous you can specify the artist name first (<code>Queen - Greatest Hits</code>)</p> <p>You can also use the <code>mass.search</code> service call and the URI will be shown in the results.</p>"},{"location":"faq/how-to/#run-ma-when-i-have-ssl-setup-on-my-internal-network","title":"Run MA when I have SSL setup on my internal network?","text":"<p>Trying to run MA with SSL is not recommended. Having said that, whilst you can not run the stream service behind SSL you can configure the frontend entirely to your requirements. The default is that the frontend is protected by Ingress in HAOS. For those using docker, it is possible to host it on a desired port and then run a (Ingress) reverse proxy. No support will be provided for these setups, we recommend you use HAOS.</p>"},{"location":"faq/how-to/#get-the-ma-icon-in-the-ha-sidebar","title":"Get the MA icon in the HA sidebar?","text":"<p>If you are running the addon within the HA host go to SETTINGS&gt;&gt;ADDONS&gt;&gt;MUSIC ASSISTANT and select \"Show in sidebar\".</p> <p>If you are using docker then you can use an iframe panel</p>"},{"location":"faq/how-to/#add-a-rotary-encoder-with-push-button-to-a-picoreplayer","title":"Add a rotary encoder with push button to a piCorePlayer","text":"<p>See here</p>"},{"location":"faq/massplaymedia/","title":"MA play_media Service Call","text":"<p>This service calls allows you to finely select the media to play. Create your service call or automation via the HA GUI or YAML</p> <p>You can use a name together with the media type</p> <p></p> <p>Or just a URI</p> <p></p> <p>Or the library id together with the media id</p> <p></p> <p>Or a track defined with the artist name, media type is recommended but optional</p> <p></p> <p>You can also have a list of items</p> <p></p> <p>Or a list of uris which can even be from different music providers</p> <p></p> <p>Note</p> <p>The regular <code>media_player.play_media</code> service call also accepts all of the above but it cannot take multiple items</p> <p>There are additional options as well. These will appear when an entity that supports them is selected.</p> <p></p> <p>Radio Mode Media Type</p> <p>You can only use the album, artist or track media_type if enabling Radio Mode</p>"},{"location":"faq/masssearch/","title":"MA search Service Call","text":"<p>This service call does a global search across all providers </p> <p></p> <p>This will return something like this</p> <p></p> <p>You could then use a template to extract what you need and then use the <code>play_media</code> service call. For example:</p> <pre><code>script:\n  search_ma:\n    mode: queued\n    alias: \"Jukebox MA search\"\n    sequence:\n      - service: mass.search\n        data:\n          limit: 8\n          name: \"{{ states.input_text.jukebox_search.state}}\"\n        response_variable: results\n      - service: input_text.set_value\n        data:\n          entity_id: input_text.jukebox_track_1\n          value: '{{ results.tracks[0].name }}'\n      - service: input_text.set_value\n        data:\n          entity_id: input_text.jukebox_artist_1\n          value: '{{ results.tracks[0].artists[0].name }}'\n</code></pre>"},{"location":"faq/normalization/","title":"Technical Information","text":"<p>This section contains more indepth technical information regarding Music Assistant's workings for those interested.</p>"},{"location":"faq/normalization/#volume-normalization","title":"Volume Normalization","text":"<p>The normalization value to totally avoid clipping should be -23 LUFS based on this official documentation https://tech.ebu.ch/docs/r/r128.pdf but values differ per plattform so it is complicated to get the right value.</p> <p>Here is a good document from the mastering plugin developer izotope comparing different plattforms like YouTube, Spotify, Deezer, Tidal and many more. This page explains the whole topic very well</p> <p>Noting the above, the default value is -17 which should be a good compromise in 99% of cases. MA originally had it set the to EBU's standard value of -23 but then there were complaints from people finding the music too silent.</p> <p>The equalizer is bypassed when the value is set to 0 but in general, it is not recommended to turn off the volume normalization because there are so many different loudness levels, especially if music is played from different sources. MA uses an integrated loudness level based on the EBU-R128 standard and only adjusts gain of the entire track up or down so there is no compression of dynamic range. For that same reason of not losing dynamic range MA does not use a limiter and it's the user's responsibility to use sane values for the target level of the volume normalization.</p> <p>If audio is only played from one single source (e.g. Deezer) and that audio source already has normalized its audio files, then its safe to disable normalization in MA. If audio is played from different sources or audio is not normalized at the source, it is highly recommended to leave normalization enabled for the best experience.</p> <p>More technical details</p> <p>All tracks are processed as raw pcm by Music Assistant internally. So everything that is played will be first converted to raw pcm in the sample rate and bit depth of the origin (unless flow mode is enabled) and the gain adjustment is done while extracting the raw source media so the pcm chunks passed into the streaming engine have the gain adjustment applied. In this way there should be enough headroom within the 16 or 24 bits bit depth. Converting to 32 or 64 bits floating point is something that has been considered but it was decided that it was not worth the overhead and comes at the risk of dithering when going back from 64 bits to 16 or 24 bits so instead the MA design settled on applying the correction gain while extracting the raw audio from its base codec.</p> <p>All further processing in MA is done at PCM raw audio level, such as the optional equalizer (in the future maybe some room correction or other filters) - if \"flow mode\" is enabled crossfading is also done on the raw pcm chunks but that will upsample all audio into one static sample rate and bit depth to create one \"flow\" of audio to send to the player.</p> <p>The final part in the chain is that MA sends either the raw pcm data to the player or encodes it into FLAC due to it being lossless while keeping a reasonable file size.</p>"},{"location":"faq/normalization/#track-queueing","title":"Track Queueing","text":"<p>MA has 3 ways of enqueuing tracks to players:</p> <p>BASIC/FALLBACK send tracks from the queue one by one. We just watch the player and if we see that it stopped playing at the end of a track, we tell it to play the next. This is the most basic form of enqueuing and completely handled by the MA queue controller and thus works with ALL players. This will NOT support gapless or crossfade. This setting is the default if the player has no native enqueue support or flow mode enabled. By default DLNA players use this option as well as the upcoming Home Assistant based players. Full metadata is sent to the player of what is playing.</p> <p>NATIVE ENQUEUE SUPPORT The player has native enqueue support so we tell it what the next track will be right before the current one ends. This is a special feature that not all players support. Its supported (and by default enabled) for Slimproto, Google Cast and Sonos players. Some DLNA players support it but others don't so we offer a player setting to enable it so a user can try himself if the player accepts it. benefit is full support gapless playback and in case of Slimproto and Sonos also crossfade. Also full metadata will be sent to the player what is currently playing.</p> <p>FLOW MODE As an alternative to native enqueuing we can also send one stream of audio to the player and let Music Assistant stitch the songs together (with gapless or crossfade). This mode is used by default for Airplay and snapcast and will be used by DLNA and Cast if crossfade gets enabled. Downside of this approach is that Google cast (and most DLNA players) looses metadata display (on the speaker itself). Some DLNA players support \"icy metadata\" which is what we send to inform what is playing. </p>"},{"location":"faq/stream-to/","title":"I Want To Stream To","text":""},{"location":"faq/stream-to/#my-local-ha-device","title":"My local HA device","text":"<p>Install the squeezelite addon which will then allow streaming over an audio connection from the HA host to your speaker or amplifier</p>"},{"location":"faq/stream-to/#my-random-connected-device","title":"My random connected device","text":"<p>Install a squeeze lite compatible application to your mobile or other devices which MA will be able to stream to.</p> <p>See here for info on how to run squeezelite on Windows</p> <p>The MA Companion App can also be configured to run a squeezelite client which will allow playback to the device running it.</p>"},{"location":"faq/stream-to/#my-esp32-based-device","title":"My ESP32 based device","text":"<p>If the hardware has at least 4MB of flash and 4MB of PSRAM it will be capable of running squeezelite directly. Use the Squeezelite ESP32 firmware. A nice solution with speaker terminals is the Louder ESP32</p> <p>If the ESP32 device has other firmware on it that has been discovered by Home Assistant then use the Home Assistant Player Provider to expose the HA media player entitiy to MA. If the exposed player is running ESPHOME then enable \"Enforce (lossy) MP3 stream\" in the player settings as this is all the player can handle.</p> <p>There is a Snapclient port which could also be used.</p>"},{"location":"faq/stream-to/#my-non-networked-device-or-bluetooth-speaker","title":"My non-networked device or bluetooth speaker","text":"<p>If you have a spare Raspberry Pi (any model) then PiCoreplayer is an excellent solution than can also connect to Bluetooth speakers. If you want better sound quality from your Pi you could add a HiFiBerry</p>"},{"location":"faq/stream-to/#my-browser","title":"My browser","text":"<p>Use a Snapserver and the Snapweb option. If you enabled the Snapcast provider in MA then the built in server will be accessible on port 1780 on the IP address of your MA server or you can also use an external server which has been added to MA as a player provider.</p>"},{"location":"faq/stream-to/#music-assistant","title":"Music Assistant","text":"<p>You could use Darkcast to stream to Icecast which in turn sets up a web radio stream that you could add to MA! You could use this to stream your turntable around the house for example. Here is a generic tutorial and for those that like a nice step by step look here. For input a HiFiBerry could be used or a USB Audio Interface like this one or this one</p>"},{"location":"faq/troubleshooting/","title":"First things to try and how to report issues","text":"<p>Probably the most common issue is people trying to run MA with complicated network setups. Running behind VPNs, across subnets or VLANs, behind firewalls, local SSL, using reverse proxies or inside containers is not supported (it might work but we can\u2019t troubleshoot for you as MA is run by a small team who don't have the resources to help with non-MA issues). Search Discord for these problems as users have regularly reported these issues and found that it is their setup that was causing the fault; their solution might help you.</p> <p>There are settings available in MA SETTINGS&gt;&gt;CORE&gt;&gt;STREAMSERVER&gt;&gt;CONFIGURE&gt;&gt;ADVANCED that might help you if you have complicated setups. If you are running MA in your own docker container then make sure you have the correct  PUBLISHED IP ADDRESS and BIND TO IP/INTERFACE set. Ensure containers are in HOST networking and PRIVILEGED mode.</p> <p>Most players are discovered using mDNS (broadcast) so if your players do not get discovered it means that your network is blocking that traffic (e.g. IGMP or multicast snooping or filtering). You will have to check your settings (e.g. WiFi setup) if multicast is being blocked. Business solutions tend to block multicast traffic as much as possible as it hurts performance when there are many clients. In a home setup is it mandatory to have because all home gear relies on multicast.</p> <p>Make sure the HA internal url is set correctly. HA SETTINGS&gt;&gt;SYSTEM&gt;&gt;NETWORK&gt;&gt;Home Assistant URL&gt;&gt;Local network (set to automatic or use your internal HA IP). If it is automatic you can try changing it to http://your.internal.ip:8123/</p> <p>MA streams at high quality which may max out poor network connections. If possible use wired connections for MA players. Input codec is not always the same as the output codec (which is FLAC) so playing a low qualiy MP3 will not change the apparent performance. If you experience stuttering or other interrupted playback issues which are not apparent on wired players or those close to your access points then poor WiFi is likely to blame. You will need to improve your WiFi coverage.</p> <p>Check the physical device settings. There have been numerous reports where the issue was actually a setting external to MA such as receivers set to repeat tracks or ESP devices with incorrect arguments passed on install.</p> <p>Ensure local files are tagged properly.</p> <p>Review the applicable player or music provider documentation to see if there are known issues or specific troubleshooting steps or fixes.</p> <p>Try power cycling the physical player(s) if they won't connect or if there is no sound.</p> <p>If after an update something isn't working then trying clearing the cache MA SETTINGS&gt;&gt;CORE&gt;&gt;CACHE CONTROLLER&gt;&gt;CONFIGURE&gt;&gt;CLEAR CACHE. If that doesn't fix it then check the GitHub Issues and Discord to see if it is a known problem. If not try restarting MA, try restarting HA, and try a full HOST REBOOT (in that order). If it is an integration problem then trying removing it from HA settings and HACS then restart HA then reinstall.</p> <p>Before you raise an issue read this first. Report issues using the template with as much detail as possible. Often posts aren\u2019t clear about exactly what is typed where, how something is configured or what series of menus are selected. Screenshots can be helpful. DOWNLOAD and ATTACH complete logs from MA settings&gt;&gt;CORE. You can also look in the Browser console when you have front end issues which in Chrome browser is --&gt; F12 for developer tools --&gt; console. Please include the following in ALL reports:</p> <ul> <li>What music provider is in use when the problem is observed? What other music providers have you tried (if you have no others then make that clear)</li> <li>What player provider is in use when the problem is observed? What other player providers have you tried (if you have no others then make that clear)</li> <li>Are the players grouped?</li> <li>How is playback being instigated (e.g. automation or via the UI)</li> <li>If you aren't using HAOS then exactly how you have installed MA</li> <li>What is working (e.g. player works with music provider X but not Y)</li> <li>What you have tried from this page that hasn't helped</li> </ul> <p>Note</p> <p>You can retrieve the full MA logs by going to the MA settings and clicking on CORE</p>"},{"location":"faq/troubleshooting/#a-provider-isnt-working","title":"A provider isn't working","text":"<p>Navigate to MA settings and inspect the provider entry. If there is a red circle with an exclamation mark next to it then hover over that icon to see the error message.</p> <p></p>"},{"location":"faq/troubleshooting/#why-arent-tracksalbums-matching-between-providers","title":"Why aren't tracks/albums matching between providers","text":"<p>Matching items between streaming providers is challenging as they do not all provide the same or unique metadata to definitively identify a match. If you think there is an obvious match (eg. same artist and track and album) then please submit an issue report. For more information about how MA uses metadata in various ways see here https://github.com/music-assistant/hass-music-assistant/discussions/543</p>"},{"location":"faq/troubleshooting/#my-media-player-is-not-available-or-not-playing","title":"My media player is not available or not playing","text":"<p>Review the list of player providers. If your device doesn't support one of the listed protocols then it won't currently work. Review the GitHub Discussions to see if others have requested support and join in the conversation.</p> <p>If your device does support one of the supported protocols then review the documentation for that player provider for known issues and troubleshooting tips.</p> <p>If your device still doesn't work and you think it should then review the full logs for discovery information and errors. Review the first things to try at the top of this page as usually if you get this far without identiying why the player isnt working it will be a networking or non-standard installation issue which, generally, you will need to resolve yourself. Search the Github Issues, Discussions and Discord) as likely someone has asked your question before.</p>"},{"location":"faq/troubleshooting/#all-my-media-is-missing","title":"All my media is missing","text":"<p>Ensure the favourites filter is OFF. At the top of each view is a \u2764\ufe0f. Ensure it is hollow.</p> <p>If you are trying to view playlists through the HA media view then you should note that only favourited playlists will show up and additionally you need to have a MA player selected to see the MA Library. HA's media browser doesn't have any filter or sorting options like MA's frontend has.</p>"},{"location":"faq/troubleshooting/#i-dont-see-any-tracks-or-albums-for-an-artist-on-a-streaming-provider","title":"I don't see any tracks or albums for an Artist on a streaming provider","text":"<p>See the Usage and Music Provider notes</p>"},{"location":"faq/troubleshooting/#my-local-album-art-isnt-being-picked-up","title":"My local album art isn\u2019t being picked up","text":"<p>Art embedded in music tracks will always be picked up but folder.jpg images will only be imported if the folder name exactly matches the album (except for any characters that are prohibited in folder names. E.g. / )</p>"},{"location":"faq/troubleshooting/#there-isnt-any-metadata-for-my-music","title":"There isn't any metadata for my music","text":"<p>For local files, you can either fully tag your music (this is preferred and it is recommended to use Picard) or have an artist folder with the artist.nfo in there (just like the images) and that will be preferred. Online metadata providers are only queried when there is no local data. https://kodi.wiki/view/NFO_files</p>"},{"location":"faq/troubleshooting/#i-have-updated-but-ma-looks-like-the-old-version-or-isnt-working","title":"I have updated but MA looks like the old version or isn\u2019t working","text":"<p>Possibly your browser is using a cached version of the front end. Try forcing a refresh Chrome, Firefox, or Edge for Windows: Press Ctrl+F5 (If that doesn\u2019t work, try Shift+F5 or Ctrl+Shift+R).</p> <p>if the above doesn\u2019t work look here for some more options</p> <p>For the IOS app see here</p>"},{"location":"faq/troubleshooting/#the-second-zone-of-my-amplifier-is-not-seen-by-ma-or-ma-wont-turn-on-my-amplifier","title":"The second zone of my amplifier is not seen by MA or MA won't turn on my amplifier","text":"<p>MA is an INPUT to your amplifier. So you need to power on your amplifier and then select the INPUT that MA is streaming to (e.g. Airplay, DLNA, Chromsecast). For this reason MA does not see the amplifier zones it only sees the compatible inputs of the amplifier. </p> <p>Some amplifiers may auto turn on when a signal is detected so check the amplifier options. If this functionality is not available then you will need to power on the amplifier via another means. The power icons that are seen beside the players must be seen as starting and stopping the stream to the player not as physically powering on or off the device.</p>"},{"location":"faq/troubleshooting/#my-local-music-isnt-being-imported-or-im-seeing-missing-id3-tag-warnings-in-the-logs","title":"My local music isn\u2019t being imported or I\u2019m seeing missing ID3 tag warnings in the logs","text":"<p>This is likely a tagging problem. See here</p>"},{"location":"faq/troubleshooting/#ma-is-interfering-with-my-spotify-connect-or-other-streaming-app","title":"MA is interfering with my Spotify Connect or Other Streaming App","text":"<p>If the MA player is \"powered on\" from the MA UI then MA understands that it is allowed to take control of the player. This may then happen even though you have started playback via another app but have not started playback via MA. To avoid this situation \"power off\" the MA player.</p>"},{"location":"faq/troubleshooting/#ma-is-crashing-on-start","title":"MA is crashing on start","text":"<p>Start MA in safe mode - With the addon select the toggle in the configration - With Docker run the container with the environmental variable MASS_SAFE_MODE set to a boolean true value, e.g. \"1\" or \"true\"</p> <p>If MA now starts, you can start any of the providers by clicking \"reload\" in the settings (click the 3 dots). If one particular provider causes MA to crash then open an issue with the details</p>"},{"location":"help/","title":"I want to help","text":"<p>With a large project like this, there is always plenty to do. Not only with actual writing of code but also in documentation, providing support, testing etc. Of course you can help out greatly by donating a few bucks but helping out can also be done in other ways:</p> <ul> <li>If you like to help with the development, e.g. implementing a new music provider or fix a player specific quirk, please reach out on discord. There hasn't been time to write extended development docs but once you get the grasp of the structure it is relatively straight forward.</li> <li>Provide or update a translation</li> <li>Help others out on discord or within the discussions part of Github</li> <li>Help out with writing documentation and HOWTO's</li> <li>Just like erkr and OzGav help out as a moderator on discord and Github with the load of incoming reports, requests and questions. Thanks guys!</li> <li>Make sure to like this project by clicking the \"star\" button and share it with others!</li> </ul>"},{"location":"help/#donations","title":"Donations","text":"<p>As explained above you can also show your appreciation in all kinds of ways. Besides that donations are great for buying some test hardware, paying for Apple/Google Developer accounts, paying hosting charges and for streaming provider accounts and contributions to the metadata projects.</p> <ul> <li>Github Sponsors</li> <li>Buy me a Coffee</li> </ul> <p>A really big thank you in advance from the whole team!</p> <p>I hope you like my little pet project I've been working on since 2019. I'm sure that together with the really great HA community we can grow this project into something fantastic. Thanks!</p> <p>Kind regards,</p> <p>Marcel</p>"},{"location":"help/lokalise/","title":"Translations","text":"<p>If you're following the frontend repo, you may have seen that we are now using Lokalise as a central translation management portal.</p> <p></p> <p>At the time of writing MA is available in Danish \ud83c\udde9\ud83c\uddf0, Dutch \ud83c\uddf3\ud83c\uddf1, English \ud83c\uddec\ud83c\udde7, French \ud83c\uddeb\ud83c\uddf7, German \ud83c\udde9\ud83c\uddea, Hebrew \ud83c\uddee\ud83c\uddf1, Italian \ud83c\uddee\ud83c\uddf9 , Norwegian \ud83c\uddf3\ud83c\uddf4, Polish \ud83c\uddf5\ud83c\uddf1, Spanish \ud83c\uddea\ud83c\uddf8 and Ukranian \ud83c\uddfa\ud83c\udde6.</p> <p>We would love to support more languages, and we need your help to do so.</p>"},{"location":"help/lokalise/#how-can-i-contribute","title":"How can I contribute?","text":"<ul> <li> <p>Create an issue in the issue tracker stating the Language that want you to contribute.</p> </li> <li> <p>We will then add this language to the project in Lokalise, and resolve the issue in GitHub</p> </li> <li> <p>Once the issue is resolved, you'll be able to use this sign-up link to join the project as a translator.</p> </li> </ul> <p></p> <p>Please only select the language that you intend to contribute to when requesting to join the team on Lokalise.</p> <p></p> <p>Thanks for taking the time to read this, we're looking forward to your contributions.</p>"},{"location":"help/lokalise/#onboarding","title":"Onboarding","text":"<p>The Lokalise team have prepared extensive documentation to get started and comfortable with the platform here</p> <p>If you prefer to jump straight into a video tutorial, you can watch that below. </p>"},{"location":"integration/","title":"Home Assistant Integration","text":"<p>The Music Assistant HA Integration provides a connection between MA and HA. This means that MA players are visible in HA and can be controlled via the HA UI or via automations or scripts. </p> <p>HA media player entities, which are not natively available in MA, can be exposed to MA as well to allow playback on those devices.</p> <p>Announcements are supported with the following features:</p> <ul> <li>If music is playing this will be temporarily paused and restored after the announcement</li> <li>Players will be powered on before the announcement and then off again if it was not powered/active before the announcement</li> <li>Volume will be increased slightly while playing the announcement</li> <li>If a player type has native support for announcements (e.g. Sonos) then that will be used in preference to the MA functionality providing an even smoother experience</li> <li>Works with all players that are supported by Music Assistant</li> <li>For TTS (Text to Speech) announcements, support is provided for prepending it with a \"pre announcement sound\". This sound can be enabled/disabled in the HA integration options</li> <li>Each player has settings which allow for adjustment of certain aspects of the announcement playback</li> </ul> <p>With some additional setup voice control of MA via HA is also possible.</p> <p>Music Assistant was originally designed to solely work with HA and as a result this tight connection has been maintained and installing the integration will also install the server as an addon. This provides a minimal effort and most secure way of getting up and running. However, this is not the only way and if you have installed the MA server elsewhere (or as an addon before) you will be able to configure the integration to connect to it.</p> <p>The Home Assistant integration consists of 2 parts:</p> <p>1) The Home Assistant Plug-in provider. This plugin is currently an empty placeholder but will in the future contain some additional features such as allowing the linking of HA player controls (for example an amplifier volume control) to a MA player </p> <p>2) The Home Assistant Player Provider. This allows you to use your HA players within MA.</p>"},{"location":"integration/installation/","title":"Installation","text":""},{"location":"integration/installation/#installation-of-the-home-assistant-integration","title":"Installation of the Home Assistant Integration","text":"<ul> <li>Make sure that you have the Home Assistant Community Store installed.</li> <li>Within HACS, search for <code>Music Assistant</code> and click the entry in the search results.</li> <li>Click the big (blue) button at the bottom for <code>Download</code>.</li> <li>Click the button again and in the dialog make sure <code>Show beta versions</code> is selected if you want to use those versions.</li> <li>Download the desired version</li> <li>Restart Home Assistant.</li> <li>Go to HA Settings&gt;&gt;Devices &amp; services&gt;&gt;Integrations and click the big <code>+ ADD INTEGRATION</code> button.</li> <li>Look for Music Assistant and click to add it.</li> <li>In the configuration if you do not intend to use the voice features then leave the Conversation Agent as None and you do not need to check the \"expose players to Assist\" checkbox. If you do intend to use voice it is slightly easier if you do the steps as part of the Installation Requirements first (see below). If you don't do them first then you will have to come back later and reconfigure the Conversation Agent.</li> <li>If Music Assistant does not show, refresh your browser (cache).</li> <li>The Music Assistant integration is ready for use.</li> <li>The MA server addon will be installed automatically if you are using HAOS.</li> </ul> <p>Note</p> <p>You need to set-up the players and music sources within Music Assistant itself.</p> <p>Note</p> <p>The HA integration will create new media_player entities for those player types which are supported natively by MA. To see the names of those players go to <code>HA settings&gt;&gt;Devices &amp; services&gt;&gt;Integrations&gt;&gt;Music Assistant</code> and view the entities. It is these players that need to be targeted in your automations.</p>"},{"location":"integration/installation/#installation-of-the-home-assistant-player-provider","title":"Installation of the Home Assistant Player Provider","text":"<p>First you must install the Home Assistant Plug-in provider</p> <ul> <li>Navigate to MA SETTINGS&gt;&gt;PROVIDERS and add the plug-in provider</li> <li>If using the Music Assistant add-on (i.e. HAOS), you wont need any server details, it should auto connect to the local HA instance</li> <li>If using the docker version of the MA server, you will be required to enter the URL to your HA instance and then authenticate</li> </ul> <p>Next install the Home Assistant Player Provider</p> <ul> <li>You need the HA plug-in first before you can use/install this provider</li> <li>In the provider settings, you can select which players you want to utilise</li> <li>You can only use players that support \"play_media\", other players will be filtered out</li> <li>MA players will also be filtered out</li> </ul> <p>Note</p> <p>Features are most likely limited with these players. Always prefer a native player provider if it exists in MA as that is optimised</p>"},{"location":"integration/installation/#service-calls","title":"Service Calls","text":"<p>The integration adds two service calls for use in scripts and automations. </p> <ul> <li>mass.play_media</li> <li>mass.search</li> </ul>"},{"location":"integration/installation/#openai-features","title":"OpenAI features","text":"<p>During Chapter 5 of \"Year of the Voice\", JLo showed something he had been working on to use the OpenAI integration along with Music Assistant. Note that this originally worked by using custom intents and it was difficult to reliably specify a player or an area for the music to be sent to. For this reason the functionality is built into the MA Integration. Some people have used the Extended OpenAI Conversation custom component to do something similar but the difference is that component requires you to expose your entities to openAI. This Integration only sends to openAI part of the request you make and openAI only responds with a JSON formatted response which is then used locally to initiate playback.  </p> <p>Installation Requirements</p> <ul> <li>You need to be running the latest version of the HA Integration</li> <li>You need a voice assistant configured (even if you want to just type in the query)</li> <li>You need to create/add another OpenAI integration that is purely for Music Assistant. Add the prompt found here when completing the configuration. For the ChatGPT version <code>gpt-3.5-turbo-1106</code> has been found to work well.</li> <li>Add a directory to your Home Assistant <code>config</code> directory named <code>custom_sentences/en</code></li> <li>Add the file found here, to that directory.</li> <li>When setting up the Music Assistant integration, make sure that you select the correct Conversation Agent and also allow the auto-exposure of MA media players to Assist</li> </ul> <p></p>"},{"location":"integration/installation/#usage","title":"Usage","text":"<p>Note</p> <p>This functionality has only been tested with <code>Home Assistant</code> selected as the <code>Conversation Agent</code> in the voice assistant configuration.</p> <p>The command to play must follow a certain format. For the following examples assume the house has three areas called <code>Study</code>, <code>Kitchen</code>and <code>Karen's Bedroom</code> and there are three media players with friendly names \"<code>Study Sonos</code>\", \"<code>Google Home</code>\" and \"<code>Karen's Speaker</code>\". Assist aliases are supported for areas and entities.</p> <p>There are two main formats which differ by where the playing location appears in the sentence.  <pre><code>Play Nirvana in the Study\nListen to Nirvana in the Study\nIn the Study play Nirvana\nIn the Study listen to Nirvana\n</code></pre></p> <p>Note</p> <p>You cannot ask to play to an area if there is more than one media player in that area.</p> <p>You can do exactly the same as the above but use the friendly names or any assist aliases of the media player instead of the area name:</p> <pre><code>Play Nirvana on the Google Home\nPlay the Dixie Chicks First Album on Karen's Speaker\n</code></pre> <p>You can also use the words <code>speaker</code> or <code>player</code> or <code>media player</code> in conjunction with the area name: <pre><code>Play Beds are burning by Midnight Oil on the Kitchen speaker\nPlay Journey Don\u2019t stop believing on the Study media player\nOn Karen's Bedroom player listen to Journey Don\u2019t Stop Believing\n</code></pre></p> <p>Note</p> <p>Queue behaviour when adding items by voice will follow the settings in MA SETTINGS&gt;&gt;CORE&gt;&gt;PLAYER QUEUES CONTROLLER.</p>"},{"location":"integration/installation/#troubleshooting","title":"Troubleshooting","text":"<ul> <li> <p>A response of \"Sorry I couldn't understand that\" indicates a failure in the pipeline before it reaches the HA integration. In this case consider doing the following.</p> <ul> <li>Ensure media players and areas are exposed to Assist</li> <li>Try typing the command</li> <li>Look carefully for differences as the ASCII level for punctuation variation between devices. This \u2019 and this ' are different</li> <li>Try adding an alias to the MA media player entity (which can be identical to the friendly name)</li> <li>Add the following to your <code>configuration.yaml</code> so you can see more detail about the intent failure <pre><code>    logger:\n      default: warning\n      logs:\n        homeassistant.components.conversation: debug\n        homeassistant.components.intent: debug\n</code></pre></li> </ul> </li> <li> <p>If when trying to play to an area you receive \u201cAn unexpected error occurred while handling the intent\u201d then:</p> <ul> <li>Check the log for errors related to <code>No entities matched</code>. If found then make sure you don't have any entities named identically to your area</li> <li>Ensure you aren't trying to play to an AREA and that area has multiple media players</li> </ul> </li> </ul>"},{"location":"music-providers/","title":"Music Providers","text":"<p>For specific music provider information refer to the relevant section.</p> <p>General Notes:</p> <ul> <li>You have to add providers in order to access your music even if the media is visible to HA.</li> <li>If you remove a provider a cleanup of the database will be done but it takes a little time to complete. If you still see entries from a deleted provider after some time, then try a MA restart to retrigger the cleanup process.</li> <li>Music providers are added by navigating to MA Settings and then clicking on ADD MUSIC PROVIDER at the top of the page</li> </ul> <p>!!! tip \"Note\" - Depending up on the sequence of adding providers the automatic linking process may need to be initiated again. If what appears to be identical albums or tracks are seen then navigate to the album or track and using the \u22ee menu in the banner at the top of the view select \"Refresh Item\". This will trigger the linking process and should result in the same albums and tracks being collapsed together.</p> <p></p>"},{"location":"music-providers/deezer/","title":"Deezer Provider","text":"<p>Music Assistant has support for Deezer. Contributed and maintained by arctixdev and micha91 </p> <p>Note</p> <ul> <li>Because of Deezer's TOS we only support HiFi/Premium/Family accounts.</li> <li>It is normal that syncing all your items from Deezer takes some time.</li> </ul>"},{"location":"music-providers/deezer/#features","title":"Features","text":"<ul> <li>Searching from the Music Assistant interface supports Artists, Albums, Tracks and Playlists.</li> <li>Items in your Deezer Favourites will be imported into the MA Library and automatically marked as a \"Favorite\" in MA.</li> <li>If you add an item from Deezer to the MA library then nothing will happen in Deezer unless you also mark it as a favourite (at which time the item will be added to the Deezer favourites)</li> <li>Artist, Album, Track and Playlist metadata is fully supported.</li> <li>Playlist creation is possible as well as adding and removing tracks from existing playlists.</li> <li>Easy oAuth login</li> <li>Logging of played tracks in Deezer</li> <li>Radio mode (Similar to Deezer flow)</li> </ul>"},{"location":"music-providers/deezer/#configuration","title":"Configuration","text":"<p>Login by pressing the <code>Authenticate</code> button when adding the provider in the Music Assistant interface.</p> <p>If this does not work ensure that you: - Are on the same network as Music Assistant - Can access Music Assistant using its IP address - Have a Hifi/Premium/Family account - Are on the latest Music Assistant version - Try different browsers</p>"},{"location":"music-providers/deezer/#not-yet-supported","title":"Not yet supported","text":"<ul> <li>Podcasts support (see this feature request)</li> <li>Fully featured recommendation/flow (see this feature request)</li> </ul> <p>Big thanks to Deezer-python made by browniebroke. Without it, this would have taken alot longer to make.</p>"},{"location":"music-providers/filesystem/","title":"Filesystem Provider","text":"<p>Music Assistant has full support for reading your own (local) music files on disk or a remote server and catalogs it into the library, allowing playback to all player providers supported by Music Assistant. </p> <p>When streaming providers are also availabe in MA linking will only occur when the same item is found in the \"Library\" of that streaming provider. However, additional tracks and albums will be seen in various views or via the global search which can then be added to the MA Library</p>"},{"location":"music-providers/filesystem/#features","title":"Features","text":"<ul> <li>Support for Artists, Albums, Tracks and Playlists.</li> <li>Local music is automatically included in the MA Library. </li> <li>Files are not favourited by default. You can see all items if you deselect the \"favourite\" filter (the heart) and decide for yourself what you want in your favourites.</li> <li>If you also have any streaming providers connected, your media will be automatically linked and completed with info from the streaming provider(s).</li> <li>On playback, when tracks are linked across providers the highest quality version is used automatically.</li> <li>You can add multiple filesystem providers.</li> </ul>"},{"location":"music-providers/filesystem/#configuration","title":"Configuration","text":"<p>Your files are on a disk/folder of the device running Music Assistant Server</p> <p>If your files are actually stored on the device running Music Assistant, for example the /media folder in Home Assistant OS, you should select the filesystem (local disk) option and enter the path to the files. </p> <p>Note</p> <p>For Home Assistant OS you can only access the /media folder. Docker users can mount their own folder paths. You can not mount a folder from Home Assistant into the /media path.</p> <p>Your files are on a remote share, such as a NAS or other (SMB/CIFS) server</p> <p>Music Assistant has support for SMB (also known as samba or CIFS) shares and DFS. Select the music provider \"Filesystem (remote share)\" and configure the (fqdn) hostname (or alternatively the IP address) to your server, the name of the share and optionally any subfolders.</p>"},{"location":"music-providers/filesystem/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Write access to the share is required in order to edit or create playlists which are stored locally. You can still save playlists into the MA built-in provider if only read access is granted.</li> <li>If you are using the remote share connection, be aware that use of SMB1 (which is very old) is not recommended. If the connection keeps failing, look in your NAS settings to see if you can somehow disable SMB1.</li> <li>If you have local artwork then it is important that album FOLDER names exactly match the tagged album name except characters that are not allowed in folder names are not parsed. Therefore, \"The Big Chill: Soundtrack\" will match \"The Big Chill Soundtrack\" but \"Vika and Linda\" will not match \"Vika &amp; Linda\"</li> <li>Use the following naming convention for local artwork (png should also work). Artist thumb: artist.jpg; Album thumb: folder.jpg or cover.jpg; Fan Art (used as background in banners): fanart.jpg. Artist thumb and Fanart should be in the folder with the artist name. Album thumbs should be in the folder with the album name or in the disc folders below that. More about artwork file types can be found here https://kodi.wiki/view/Artwork_types</li> <li>Embedded album thumbs will be extracted from audio files. However, you can improve performance and save disk space by providing a single local artwork file vs. embedding the same artwork in all files.</li> </ul> <p>Local Artwork is Optimal</p> <p>Using embedded images on every track of the same album is suboptimal for both disk space and performance. Use a single folder.jpg in the album's folder instead.</p> <ul> <li>Artwork which is downloaded is throttled to approximately one request every 30 seconds so it will take some time to download all required artwork with large collections. You can force the download by selecting \"Refresh Item\" from the \u22ee menu in the banner at the top of a view.</li> <li>Local tracks and albums will be linked to the same tracks or albums on other streaming providers. Note that same is not simply same name. The tags are reviewed to ascertain whether it is indeed the exact same track. Without tag information MA will attempt to identify identical tracks based on the other information it has such as artist name, album, and track length. However, poor tag information may lead to poor matches.</li> <li>MA prefers an Album Artist to be set for all albums. There is a setting under Advanced in the provider configuration for what to do if a track is found without this set. The default is to skip the track, so if your tracks are not being imported into the Library then check for this (there will be warnings in the log)</li> </ul>"},{"location":"music-providers/filesystem/#tagging-files","title":"Tagging Files","text":"<ul> <li>It is very important that all of your audio files contain proper ID3 tag information. The more comprehensive the tagging the better the results will be when using MA. For this reason it is strongly recommended that all files are tagged with MusicBrainz Picard. This will ensure consistency and completeness of the tags that MA needs to work best. Other programs such as Mp3Tag are often also based on the Musicbrainz catalog and can work as well provided they include ISRC and all MBID tags.</li> <li>Music Assistant puts you in control by fully trusting the ID3 tags you provide, only additional information is scraped from metadata providers.</li> <li>Music Assistant has support for both embedded artwork and artwork stored in a common folder structure of Artist \\ Album and .nfo files with enhanced metadata are also supported.</li> <li>Files simply dumped into a random structure will also be imported but no other data will be retrieved from the folder structure.</li> <li>To minimise the chance of problems with MA you should follow the Kodi guidelines here https://kodi.wiki/view/Music_tagging Just about all the tips, tricks and suggestions on that page are applicable to MA and if you follow it all to the letter you will have a much better experience.</li> <li>For multi disc albums it is recommended (but not required) to add folders named \u201cDisc 1\u201d, \u201cDisc 2\u201d, etc beneath a folder with the album name. Artwork for the album can be added to the top level album folder or in the disc folders.</li> <li>If there is nothing added to the disc tag then the disc number will not be shown in the display</li> </ul>"},{"location":"music-providers/jellyfin/","title":"Jellyfin Provider","text":"<p>Music Assistant has support for music servers which work to the Jellyfin definition. This component is contributed and maintained by lokiberra</p>"},{"location":"music-providers/jellyfin/#features","title":"Features","text":"<p>Supports Albums, Artists, Tracks Playlists and search from and 'Music' libraries on the Jellyfin server</p>"},{"location":"music-providers/jellyfin/#configuration","title":"Configuration:","text":"<p>You will need to provide the following to Music Assistant:</p> <ul> <li>A server url (e.g. https://music.domain.tld/ or http://192.168.1.4:8096/ for a local server)</li> <li>A user name for the account you want Music Assistant to use to access your server</li> <li>The password for this account</li> </ul>"},{"location":"music-providers/jellyfin/#not-yet-supported","title":"Not Yet Supported:","text":"<ul> <li>Album types metadata</li> </ul>"},{"location":"music-providers/jellyfin/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>This provider makes use of the Jellyfin ApiClient for communicating with the server. If something is failing to work properly in Music Assistant, try to use that library to interact with your server (can you ping it?, fetch artist and albums?, can you search?).</li> </ul>"},{"location":"music-providers/plex/","title":"Plex Provider","text":"<p>Music Assistant has support for using Plex (MusicLibrary). Contributed by micha91</p> <p>Warning</p> <p>Please be advised this provider is currently not maintained. Issues may take a long time to be resolved. Consider sharing your music directly with MA instead</p>"},{"location":"music-providers/plex/#configuration","title":"Configuration","text":"<ul> <li>Click the <code>Use Plex GDM to discover local servers</code> button, this should discover your local server and prefill the <code>local_server_ip</code> and <code>local_server_port</code> fields.</li> <li>If GDM discovery fails, the 2 fields mentioned above will be filled with \"Discovery failed.... \". In this case, please add the IP address of your server, and the port that you are exposing it on (usually 32400).</li> <li>Now click the <code>Authenticate on MYPLEX.TV</code> button, this may trigger your browser <code>pop-up</code> detection, so watch out for that, authenticate as you normally would for Plex.</li> <li>Select the Music library that you would like to use.</li> <li>Save the settings.</li> </ul>"},{"location":"music-providers/plex/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>A Plex provider is always bound to a user account and a library. </li> <li>If you have multiple libraries, you need to add the Plex provider multiple times.</li> <li>If you have multiple Plex accounts, which have their own playlists, you can also add them as separate provider instances.</li> </ul>"},{"location":"music-providers/qobuz/","title":"Qobuz Provider","text":"<p>Music Assistant has full support for Qobuz, including Qobuz's excellent HiRes catalogue!</p>"},{"location":"music-providers/qobuz/#features","title":"Features","text":"<ul> <li>Support for Artists, Albums, Tracks and Playlists</li> <li>Items in your Qobuz Favourites will be marked as \"in library\" in Music Assistant</li> <li>Marking an item as \"in library\" from the Music Assistant interface will also mark it as a favorite in Qobuz</li> <li>On playback, the highest quality is preferered automatically</li> </ul>"},{"location":"music-providers/qobuz/#configuration","title":"Configuration","text":"<ul> <li>In the configuration, you need to enter your Qobuz username and password</li> </ul>"},{"location":"music-providers/qobuz/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Radio Mode is not supported</li> </ul>"},{"location":"music-providers/qobuz/#not-yet-supported","title":"Not yet supported","text":"<ul> <li>Recommendations</li> </ul>"},{"location":"music-providers/radio-browser/","title":"Radio Browser Provider","text":"<p>Music Assistant has support for RadioBrowser which allows easy addition of online radio stations to Music Assistant.</p>"},{"location":"music-providers/radio-browser/#features","title":"Features","text":"<ul> <li>You can use the search function.</li> <li>You can add radio streams to your library.</li> <li>Browse by country, by tag or by popularity</li> </ul>"},{"location":"music-providers/radio-browser/#configuration","title":"Configuration","text":"<ul> <li>In the configuration, you only need to click the save button. </li> </ul>"},{"location":"music-providers/radio-browser/#usage","title":"Usage","text":"<p>The Radio provider doesn't add stations to the 'radiostation' tab by default.</p> <ol> <li>In the left hand menu you need to select 'browse'</li> <li> <p>Then click 'RadioBrowser'</p> <p></p> </li> <li> <p>Then navigate to the radio-station you want to listen to</p> </li> <li>Click play now or add to library </li> </ol> <p>After completing step 4 the station will become available in the Radio view</p>"},{"location":"music-providers/soundcloud/","title":"SoundCloud Provider","text":"<p>Music Assistant has support for Soundcloud. Contributed by gieljnssns</p>"},{"location":"music-providers/soundcloud/#configuration","title":"Configuration","text":"<p>Two fields need to be completed to use this provider, Client id and Authorization. To obtain these proceed as follows:</p> <ol> <li>Delete your cookies for Soundcloud.</li> <li>Go to Soundcloud.</li> <li>Open the <code>Inspect</code> tool (F12 on most browsers).</li> <li>Go to the page <code>Network</code> on the inspect terminal.</li> <li>Login.</li> <li>Search for <code>auth</code>.</li> <li>In one of the requests you will find <code>client_id</code> and <code>Authorization</code></li> </ol> <p><code>client_id</code>: string of 32 bytes alphanumeric</p> <p><code>Authorization</code>: string that begins with O-Auth and a string (the o-auth token is \"O-Auth . . .\")</p> <p></p> <p>Example code snippet (O-Auth and client_id are NOT real, use yours):</p> <pre><code>client_id = jHvc9wa0Ejf092wj3f3920w3F920as02\nAuthorization = O-Auth 3-26432-21446-asdif2309fj\n</code></pre>"},{"location":"music-providers/soundcloud/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Artists synced from Soundcloud are actually Soundcloud users.</li> <li>If a song by artist X is uploaded by user Y, this song belongs to the artist Y in Music Assistant</li> </ul>"},{"location":"music-providers/spotify/","title":"Spotify Provider","text":"<p>Music Assistant has full support for Spotify media listing and playback.</p>"},{"location":"music-providers/spotify/#features","title":"Features","text":"<ul> <li>Support for Artists, Albums, Tracks and Playlists.</li> <li>Items in your Spotify library (including the Liked Songs playlist) will be added to the Library in Music Assistant.</li> <li>Adding an item from Spotify to the Music Assistant Library will also add it to \"Your Library\" in Spotify</li> <li>Marking an item as a favourite in Music Assistant will also add it to the MA Library and \"Your Library\" in Spotify</li> <li>Multiple Spotify accounts can be added. All playlists from all accounts will be shown. If a playlist is selected for playback the source Spotify account will be used.</li> <li>Radio mode is supported</li> </ul>"},{"location":"music-providers/spotify/#configuration","title":"Configuration","text":"<ul> <li>In the configuration, you need to enter your Spotify username and password</li> <li>If you login to Spotify with 3rd party accounts (eg. Facebook) then you can set a device password to use by going here</li> <li>You will receive an error of \u201cOnly premium accounts are supported\u201d if you use incorrect login credentials so check the login details, try a different account or reset the password if you think that error message is incorrect.</li> </ul>"},{"location":"music-providers/spotify/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Only Spotify PREMIUM accounts are supported (includes Duo and Family), free accounts will not work.</li> </ul>"},{"location":"music-providers/spotify/#not-yet-supported","title":"Not yet supported","text":"<ul> <li>Podcasts support (see this feature request)</li> <li>Recommendations (see this feature request)</li> </ul>"},{"location":"music-providers/subsonic/","title":"Subsonic Provider","text":"<p>Music Assistant has support for music servers which work to the Open Subsonic API definition. The implementation has been tested against Gonic and Navidrome but should work with any implementation. Currently only Music is imported into the Music Assistant database but the infrastructure for handling podcasts is present when they are supported in Music Assistant. This component is contributed and maintained by khers</p>"},{"location":"music-providers/subsonic/#configuration","title":"Configuration:","text":"<p>You will need to provide the following to Music Assistant:</p> <ul> <li>A base URL for the server (e.g. https://music.domain.tld)</li> <li>A port number (e.g. 80 for plain http, 443 for https, or an port where your server can be reached)</li> <li>A path used to get to the rest API (e.g. mypathroute/ if you are path routing, leave this blank unless you know you need it)</li> <li>A user name for the account you want Music Assistant to use to access your server</li> <li>The password for this account</li> </ul> <p>There is also a toggle for podcasts which will have no effect now but will allow those who cannot or do not want to make podcasts available to Music Assistant.</p>"},{"location":"music-providers/subsonic/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Not all server implementations accept an empty string as a search query, however this is considered valid input per the API documentation. If search or track enumeration fails, ask the authors of your server implementation about handling empty query strings.</li> <li>This provider makes use of https://github.com/khers/py-opensonic for communicating with the server, if something is failing to work properly in Music Assistant, try to use that library to interact with your server (can you ping it?, fetch artist and albums?, can you search?).</li> </ul>"},{"location":"music-providers/tidal/","title":"Tidal Provider","text":"<p>Music Assistant has support for Tidal. Contributed and maintained by jozefKruszynski</p>"},{"location":"music-providers/tidal/#features","title":"Features","text":"<ul> <li>Support for Artists, Albums, Tracks and Playlists</li> <li>Items in your Tidal library will be marked as \"Favourites\" in Music Assistant</li> <li>Marking an item as a \"Favourite\" from the Music Assistant interface will also mark it as favourite in Tidal</li> <li>On playback, the highest quality FLAC HiFi version will be selected</li> <li>Radio Mode is supported</li> </ul>"},{"location":"music-providers/tidal/#configuration","title":"Configuration","text":"<ul> <li>In the configuration, you only need to click the button to authenticate with Tidal. Then you will be redirected to the Tidal login page and the device code will be automatically filled</li> </ul>"},{"location":"music-providers/tidal/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>If the authorisation process gets stuck then try a different browser. It is likely the authorisation pop up window is being blocked</li> <li>The highest quality that can be provided is 48kHz / 24 bits due to limitations in the login method</li> </ul>"},{"location":"music-providers/tidal/#not-yet-supported","title":"Not yet supported","text":"<ul> <li>Recommendations (see this feature request)</li> <li>Multiple accounts (this is being worked on and available soon)</li> <li>Tidal Master Quality etc. will be supported in the near future</li> <li>Mixes</li> </ul>"},{"location":"music-providers/tunein/","title":"TuneIn Provider","text":"<p>Music Assistant has support for Tunein</p>"},{"location":"music-providers/tunein/#features","title":"Features","text":"<p>The stations which are in your TuneIn library will be imported into the MA library and be visible in the Radio view</p>"},{"location":"music-providers/tunein/#configuration","title":"Configuration","text":"<p>In the configuration, you only need to add your login name.</p>"},{"location":"music-providers/url/","title":"URL Provider","text":"<p>Music Assistant has support for manually adding radio station URLs to the database.</p>"},{"location":"music-providers/url/#features","title":"Features","text":"<ul> <li>You can add any online station or your locally created stations using, for example, Icecast</li> </ul>"},{"location":"music-providers/url/#usage","title":"Usage","text":"<p>The URL provider is enabled by default.</p> <ol> <li>In the left hand menu you need to select 'Radio'</li> <li> <p>Then click on the \u22ee in the top right corner</p> <p></p> </li> <li> <p>Then click on ADD ITEM FROM URL</p> </li> <li>Add the full URL including http:// or https:// </li> </ol> <p>After completing step 4 the station will become available in the Radio view</p>"},{"location":"music-providers/youtube-music/","title":"YouTube Music Provider","text":"<p>Music Assistant has support for Youtube Music. Contributed and maintained by MarvinSchenkel</p> <p>DISCLAIMER</p> <p>Please note that Youtube does not offer an official API to retrieve data and streams. This means that everything is built on a best-effort basis. Unexpected behavior will occur whilst using this provider. For this reason if you have another streaming provider you may find it more convenient to use that instead of this one.</p> <p>Note</p> <p>Free accounts are NOT supported.</p>"},{"location":"music-providers/youtube-music/#features","title":"Features","text":"<p>The highest available stream from Youtube Music will be selected for playback (similar to configuring 'high' in the web-app). This then gets re-encoded by MA to a lossless FLAC.</p>"},{"location":"music-providers/youtube-music/#configuration","title":"Configuration","text":"<p>Music Assistant uses OAuth for Youtube Music, which means login is accomplished as is done on Gmail (for example). To add the Youtube Music provider to MA:</p> <ul> <li>Navigate to 'Settings'</li> <li>Under Music Providers, click 'Add new', select 'Youtube Music' and click 'Authenticate with Youtube Music'</li> <li>A new window will open. Ignore the code and click 'Next'</li> <li>Login with your gmail account</li> <li>Optionally choose a brand account</li> <li>Click 'Allow'</li> <li>You can now manually close the tab to return to Music Assistant</li> <li>Click 'Save'</li> </ul>"},{"location":"music-providers/youtube-music/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>This provider mimics YouTube Music. Do not expect to see the same search results as you see if using YouTube.</li> <li>There is no support for the disc and track number in album tracks listings. Currently, the disc number is always 0 and the track number is the order number in which the tracks were returned by Youtube Music. This should generally give the desired result, but could mess up multi-disc albums.</li> <li>Whether music videos are selected for playback fully depends on what you are playing. If you have saved a specific album in your library, then that exact version will show up in MA and thus you will have the album version. However, if you start a radio on, for example, a playlist, then Youtube Music decides which songs will be played in a 'dynamic radio' playlist which could include videos.</li> <li>Uploaded Music should be able to be found when it is in a playlist. If it's just a single track being searched for then it may not be found, since often those uploaded songs don't have proper metadata. It will be hard to find them via the UI in MA.</li> <li>Some low quality artwork can be expected when using this provider. YTM is very inconsistent when it comes to delivering thumbnails. When a Playlist or album is retrieved, the thumbs for the tracks are usually in low quality for all songs. However, when a single track is played the HQ version should be displayed. This provider tries to work around the problem for albums and playlists by loading details for the next enqueued track, but some low quality album art is still expected to be encountered.</li> </ul>"},{"location":"player-support/","title":"Player Providers","text":"<p>For specific player provider information refer to the relevant section in this document. Most players are enabled by default and will be automatically discovered by Music Assistant.</p> <p>If a device supports multiple protocols then multiple players for the device will be seen. In the player provider settings you can disable or hide any players you do not use.</p> <p> </p>"},{"location":"player-support/#audio-quality","title":"Audio Quality","text":"<p>Audio quality is the principal reason why native MA players are developed. These players provide the highest quality playback experience. HA players will work and may work well but they may also have been written with a basic objective such as enabling text to speech. Therefore, if there is a MA player available and a HA integration then you should always choose the MA player. </p> <p>96kHz / 24 bits and above is considered High Resolution (Hi Res)</p> <ul> <li>Airplay supports lossless (44.1kHz / 16 bits which is cd quality) but not Hi Res.</li> <li>Sonos supports lossless (44.1kHz / 16 bits which is cd quality) on series 1 models and 48KHz / 24 bits on series 2.</li> <li>Chromecast supports Hi Res up to 96KHz / 24 bits (except the video dongles which do 48KHz / 24 bits)</li> <li>Slimproto supports Hi Res up to 384kHz / 24 bits</li> <li>DLNA supports Hi Res up to 192kHz / 24 bits</li> <li>Snapcast supports up to 48kHz / 16 bits</li> </ul>"},{"location":"player-support/airplay/","title":"Airplay","text":"<p>Music Assistant has support for Airplay based devices. This includes Apple devices such as the Homepod but also a very wide range of 3rd party devices such as receivers and smart speakers. Due to the fact that Airplay uses lossless, timestamped streaming it is a very interesting protocol for lossless multi room playback.</p>"},{"location":"player-support/airplay/#features","title":"Features","text":"<ul> <li>Airplay devices are auto detected in Music Assistant, plug and play</li> <li>Airplay devices will play in sync</li> <li>Audio quality is lossless 44.1/16bits PCM and optionally compressed as (lossless) ALAC</li> <li>The player settings include some basic equaliser settings</li> <li>The player settings allow configuration of stereo pairs of speakers</li> </ul>"},{"location":"player-support/airplay/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Music Assistant implements RAOP (airplay 1) only, Airplay 2 devices should be backwards compatible by default</li> <li>Whilst it is believed to have been fixed, issues have been reported when using Shairport and Airplay V2. If problems are encountered they try disabling Airplay V2</li> <li>To enable playback to a Macbook, you need to enable access to \"everyone on the same network\" in the Airplay settings of the Macbook</li> <li>Because Apple TV's require authentication, they are not supported yet (but will be in the future if there's any demand)</li> <li>Samsung seems to have implemented AirPlay 2 in a way that it isn't fully backwards compatible. Everything seems to work, changing volume, song info is shown, and you can control the Samsung device as expected, however there is no sound. Users of similar applications such as Roon and anything based on slimproto have the same problem. </li> <li>Some devices (such as Kodi or some 3rd party airplay receivers) require encryption. You can enable encryption in the advanced player settings if there is no sound</li> <li>Also try compression on and off in the advanced player settimgs if there is no sound</li> <li>A device password can be set for those devices which require it in the advanced settimgs</li> <li>If you find your player is going unavailable when still powered on then it may not be sending its keep alive message. A timeout can be configured for each player. Some users have reported they have needed to set it as long as one hour</li> </ul>"},{"location":"player-support/dlna/","title":"DLNA/UPnP","text":"<p>Music Assistant has support for uPnP/DLNA based devices. This is a (somewhat) universal standard for streaming audio to supported devices. Due to the very inconsistent implementation of this protocol by manufacturers, some players will work great and others will simply not work at all or need workarounds. Other than that, if you have a device that works, you can enjoy fast local control, lossless audio support and in many cases metadata of your playing media.</p>"},{"location":"player-support/dlna/#features","title":"Features","text":"<ul> <li>DLNA devices are auto detected in Music Assistant</li> </ul>"},{"location":"player-support/dlna/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Some devices need special workarounds to enable playback. If playback is not working, look at the Music Assistant logs for clues and report an issue with these logs provided. </li> <li>If your device is not found then try turning on the option \"allow network scan for discovery\"</li> <li>DLNA speakers do not support crossfading of audio. If you want crossfade and/or full gapless support, enable flow mode in the player's advanced settings. Enabling flow mode may solve playback issues however it might come with the side effect of disabling actual physical buttons and/or display of metadata on the device itself.</li> <li>It is not possible to group/sync DLNA players together.</li> <li>Although Sonos devices are strictly also based on DLNA, they created their own extra layer on top of that such as crossfade support and many other goodies. It is therefore advised to use the Sonos Player provider with Music Assistant instead of the DLNA provider. MA disables any discovered Sonos DLNA devices by default.</li> </ul>"},{"location":"player-support/fully-kiosk/","title":"Fully Kiosk Browser","text":"<p>Music Assistant has support for streaming to devices running the Fully Kiosk Browser Android application</p>"},{"location":"player-support/fully-kiosk/#features","title":"Features","text":"<ul> <li>This is a basic player</li> <li>Multiple Fully Kiosk browser players can be added</li> </ul>"},{"location":"player-support/fully-kiosk/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>The Fully Kiosk player must be manually added</li> <li>A paid license for Fully Kiosk is required</li> <li>When configuring you must add the device IP address and the Fully Kiosk password</li> <li>Once added the device name can be changed, if required, in the specific player configuration</li> <li>Some devices cannot handle the FLAC stream so an option in the settings allows for changing to the lossy MP3 codec</li> <li>Crossfade is supported if flow mode is enabled in the settings. Enabling flow mode may also solve playback issues however it might come with the side effect of disabling actual physical buttons and/or display of metadata on the device itself</li> <li>This player can be grouped via a Universal Group but perfect sync is not possible.</li> </ul>"},{"location":"player-support/google-cast/","title":"Google Cast","text":"<p>Music Assistant has full support for Google Cast based devices. This includes Google's own hardware like the Google Nest speakers but also a wide range of other brands have \"Chromecast builtin\" support, like Harman Kardon, JBL, Canton and many others. </p>"},{"location":"player-support/google-cast/#features","title":"Features","text":"<ul> <li>Cast speakers are auto detected by Music Assistant</li> <li>Music Assistant supports playing to cast groups which are created in the Google Home app.</li> <li>When using Google cast groups then perfect sync across players in that group is possible.</li> <li>Any physical control buttons on the device should be supported as well as voice control.</li> </ul>"},{"location":"player-support/google-cast/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Cast speakers do not support crossfading of audio. If you want crossfade and/or full gapless support, enable the \"flow mode\" in the player's advanced settings. Enabling flow mode may solve playback issues however it might come with the side effect of disabling actual physical buttons and/or display of metadata on the device itself</li> <li>If your Chromecast speakers are not auto detected or randomly unavailable then make sure that your Cast enabled speakers are on the same network/subnet as your Music Assistant server. Additionally, ensure that multicast traffic (more specifically mDNS) can travel freely as that is used for the discovery of players.</li> <li>After re-enabling a disabled speaker, it can take a while before the speaker is rediscovered, the process can be sped up by restarting Music Assistant.</li> <li>It is not possible to group/sync cast players from within the MA interface (simply because an api does not exist for that).</li> </ul>"},{"location":"player-support/ha/","title":"Home Assistant","text":"<p>Music Assistant has support for playing to media player entities in Home Assistant.</p>"},{"location":"player-support/ha/#features","title":"Features","text":"<ul> <li>All media player entities that are available in HA, for which there is no dedicated MA provider, will be available in MA</li> </ul>"},{"location":"player-support/ha/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>This player provider is not enabled by default and must be added via MA settings however before it is available you must setup the Home Assistant Plug-in Provider</li> <li>In the provider settings, select which players you want to use</li> <li>You can only use players that support \"play_media\", other players will be filtered out</li> <li>MA players will be filtered out</li> <li>Synchronisation between this player type and any others is not possible</li> <li>Enabling flow mode may solve playback issues however it might come with the side effect of disabling actual physical buttons and/or display of metadata on the device itself</li> </ul>"},{"location":"player-support/slimproto/","title":"Slimproto (a.k.a Squeezebox)","text":"<p>Music Assistant (partly) emulates a Logitech Media Server and has a full implementation of the Slim protocol (aka slimproto). This means you can use squeezebox players directly with Music Assistant. This applies to the original Logitech branded Squeezebox hardware players like the Radio and the Duet and any software variants of it like squeezelite which runs on almost any hardware, including your own desktop OS and even ESP32 boards.</p>"},{"location":"player-support/slimproto/#features","title":"Features","text":"<ul> <li>Slimproto devices are auto detected in Music Assistant</li> <li>Slimproto devices will play in sync</li> <li>Any physical control buttons on the device should be supported as long as flow mode is not enabled</li> <li>The player settings include some basic equaliser settings</li> <li>The player settings allow configuration of stereo pairs of speakers</li> </ul>"},{"location":"player-support/slimproto/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Make sure that you do not have Logitech Media Server running</li> <li>Make sure that you do not have the \"slimproto\" integration running in Home Assistant</li> <li>Ordinarily do not use flow mode unless using older squeezebox hardware player that has issues transitioning. Enabling flow mode may solve playback issues however it might come with the side effect of disabling actual physical buttons and/or display of metadata on the device itself</li> </ul>"},{"location":"player-support/snapcast/","title":"Snapcast","text":"<p>Music Assistant supports Snapcast, a powerful solution for synchronized multi-room audio streaming. Snapcast enables seamless playback across various devices, creating an immersive audio experience. Whether you're using Snapcast-compatible speakers or devices like the Raspberry Pi, you can enjoy synchronized audio playback effortlessly. This component is contributed and maintained by SantiagoSotoC</p> <p>MA includes a built-in Snapserver although an external server can also be used. The diagram below shows a possible combination of outputs. In the diagram a Raspberry Pi runs the server which communicates to MA and all of the clients. The server running Pi is also running Snapclient and is connected to a set of speakers. Then there is another Pi running Snapclient in another room, a phone running Snapdroid and a laptop running Snapweb,</p> <p></p>"},{"location":"player-support/snapcast/#features","title":"Features","text":"<ul> <li>Synchronized playback across all Snapcast devices.</li> <li>Lossless audio quality with options for 48 kHz /16bits PCM.</li> </ul>"},{"location":"player-support/snapcast/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>The Snapcast provider is not enabled by default. A built-in Snapserver with the Snapweb option is launched when this provider is added. Once enabled the workings of the server are transparent and the clients appear in the MA UI</li> <li>Music Assistant only supports Snapcast version 0.27.0 (or newer)</li> <li>The Snapcast provider will use the built-in Snapserver by default although a switch in the settings allows the use of an external server if desired. When using an external server the server IP and port must be entered.</li> <li>The built-in Snapserver can only accept connections from Music Assistant</li> <li>If it is necessary to adjust the latency of a client, it must be done from another interface such as Snapdroid or Snapweb</li> <li>Pausing the player is NOT supported. If you try and do that you will get weird behaviour.</li> <li>The Snapcast app for iOS is broken as it uses an old version of Snapclient. Using it brings problems with this provider</li> <li>If using an external server ensure it is launched with the command \"snapserver -v\".</li> <li>Ensure that the ports 1704 and 1705 on the Snapserver host are open. Also ensure that for each client a port equal to or greater than 4953 is open</li> <li>Try the default Snapcast settings and then make changes as necessary.</li> <li>Client names for all clients can be adjusted in Snapweb and Snapdroid via their respective UIs</li> </ul>"},{"location":"player-support/sonos/","title":"Sonos","text":"<p>Music Assistant has support for Sonos devices.</p>"},{"location":"player-support/sonos/#features","title":"Features","text":"<ul> <li>Sonos devices are auto detected by Music Assistant</li> <li>Sonos devices will play in sync</li> <li>Any physical control buttons on the device should be supported as long as flow mode is not enabled. </li> </ul>"},{"location":"player-support/sonos/#known-issues-notes","title":"Known Issues / Notes","text":"<ul> <li>Issues have been reported with the Sonos Arc and Unifi networking equipment. Ensure Multicast DNS and IGMP snooping are turned on if you have problems</li> </ul>"},{"location":"player-support/universal/","title":"Universal Groups","text":"<p>Music Assistant has support for grouping playback devices. </p>"},{"location":"player-support/universal/#features","title":"Features","text":"<p>All devices (except Chromecast) can be grouped but not all will play in sync. See the individual players for their limitations.</p> <p>Tip</p> <p>Reminder chromecast devices must be grouped in the Google Home app for perfect sync</p> <p></p>"},{"location":"player-support/universal/#known-issues-notes","title":"Known Issues / Notes","text":"<p>UGP is on best-effort basis and might not work correctly with all player models or give unexpected results. For best reaults use standalone or syncgroup playback as explained here</p>"}]}